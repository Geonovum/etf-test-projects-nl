<?xml version="1.0" encoding="UTF-8"?>
<etf:ExecutableTestSuite xmlns="http://www.interactive-instruments.de/etf/2.0"
                         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                         xmlns:etf="http://www.interactive-instruments.de/etf/2.0"
                         xmlns:ii="http://www.interactive-instruments.de"
                         id="EID2d679502-0802-11e8-d212-09173f13e4c5"
                         xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/service/service.xsd">
   <itemHash>bQ==</itemHash>
   <remoteResource>https://github.com/interactive-instruments/etf-ets-repository</remoteResource>
   <localPath>/auto</localPath>
   <label>Schematron schematron</label>
   <description>...</description>
   <reference>../../generic/schematron-bsxets.xq</reference>
   <version>1.0.0</version>
   <author>See original schematron file:/home/thijs/code/Geonovum/ETF/github/etf-test-projects-nl/src/metadata/Nederlands%20profiel%20op%20ISO%2019119%20v12%202016/schematron.sch</author>
   <creationDate>2018-03-02T14:14:17.253+01:00</creationDate>
   <lastEditor>ETF Schematron to ETF Executable Test Suite Transformer</lastEditor>
   <lastUpdateDate>2018-03-02T14:14:17.253+01:00</lastUpdateDate>
   <tags>
      <tag ref="EID11351082-200a-4fc1-8c4f-733cb9137365"/>
   </tags>
   <testDriver ref="EID4dddc9e2-1b21-40b7-af70-6a2d156ad130"/>
   <translationTemplateBundle ref="EID5f9f1c84-03cd-475b-9a1c-a1a04abca04e"/>
   <ParameterList name="ETF Standard Parameters for XML test objects">
      <parameter name="files_to_test" required="true">
         <defaultValue>.*</defaultValue>
         <description ref="TR.filesToTest"/>
         <allowedValues>.*</allowedValues>
         <type>string</type>
      </parameter>
      <parameter name="tests_to_execute" required="false">
         <defaultValue>.*</defaultValue>
         <description ref="TR.testsToExecute"/>
         <allowedValues>.*</allowedValues>
         <type>string</type>
      </parameter>
      <parameter name="xml_namespaces" required="false">
         <defaultValue>declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; </defaultValue>
         <description ref="TR.xmlNamespaces"/>
         <allowedValues>.*</allowedValues>
         <type>string</type>
      </parameter>
   </ParameterList>
   <supportedTestObjectTypes>
      <testObjectType ref="EID5a60dded-0cb0-4977-9b06-16c6c2321d2e"/>
   </supportedTestObjectTypes>
   <testModules>
      <TestModule id="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5">
         <label>Validatie tegen het Nederlands metadata profiel op ISO 19119 voor services v 1.2.1</label>
         <description>...</description>
         <parent ref="EID2d679502-0802-11e8-d212-09173f13e4c5"/>
         <testCases>
            <TestCase id="EID9c72f661-1e1b-11e8-d2e7-09173f13e4c5">
               <label>Algemene metadata regels</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f554-1e1b-11e8-d415-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c72f661-1e1b-11e8-d2e7-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c72f665-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Schema locatie service metadata</label>
                           <description>Het ISO 19139 XML document mist een verplichte schema locatie. De schema locatie met namespace http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd moet aanwezig zijn. Zie https://www.pdok.nl/nl/ngr/faq#schemalocatie</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(@xsi:schemaLocation), 'http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd')", map { '': $i}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdab-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>Metadata ID (ISO nr. 2)</label>
                           <description>Metadata ID (ISO nr. 2) ontbreekt of heeft een verkeerde waarde.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $fileIdentifier external; $fileIdentifier", map { '': $i, 'fileIdentifier': $fileIdentifier}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.2', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.2"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdb4-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>De metadata taal (ISO nr. 3)</label>
                           <description>De metadata taal (ISO nr. 3) ontbreekt of heeft een verkeerde waarde. Dit hoort een waarde en verwijzing naar de codelijst te zijn.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $mdLanguage external; $mdLanguage", map { '': $i, 'mdLanguage': $mdLanguage}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.3', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.3"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdba-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>Resource type (ISO nr. 6)</label>
                           <description>Resource type (ISO nr. 6) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $hierarchyLevel external; $hierarchyLevel", map { '': $i, 'hierarchyLevel': $hierarchyLevel}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.4', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.4"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdc0-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>Naam organisatie metadata (ISO nr. 376)</label>
                           <description>Naam organisatie metadata (ISO nr. 376) ontbreekt</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $mdResponsibleParty_Organisation external; $mdResponsibleParty_Organisation", map { '': $i, 'mdResponsibleParty_Organisation': $mdResponsibleParty_Organisation}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.5', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.5"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdc9-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>Rol organisatie metadata (ISO nr. 379)</label>
                           <description>Rol organisatie metadata (ISO nr. 379) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $mdResponsibleParty_Role external; $mdResponsibleParty_Role", map { '': $i, 'mdResponsibleParty_Role': $mdResponsibleParty_Role}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.6', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.6"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdd3-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>INSPIRE Rol organisatie metadata (ISO nr. 379)</label>
                           <description>Rol organisatie metadata (ISO nr. 379) ontbreekt of heeft een verkeerde waarde, deze dient voor INSPIRE contactpunt te zijn</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_Interoperability_Exsists external; declare variable $mdResponsibleParty_Role_INSPIRE external; not($conformity_Spec_Title_Interoperability_Exsists) or ($conformity_Spec_Title_Interoperability_Exsists and $mdResponsibleParty_Role_INSPIRE)", map { '': $i, 'conformity_Spec_Title_Interoperability_Exsists': $conformity_Spec_Title_Interoperability_Exsists, 'mdResponsibleParty_Role_INSPIRE': $mdResponsibleParty_Role_INSPIRE}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.7', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.7"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdd9-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>E-mail organisatie metadata (ISO nr. 386)</label>
                           <description>E-mail organisatie metadata (ISO nr. 386) ontbreekt</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $mdResponsibleParty_Mail external; $mdResponsibleParty_Mail", map { '': $i, 'mdResponsibleParty_Mail': $mdResponsibleParty_Mail}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.8', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.8"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fde1-1e1b-11e8-d2e1-09173f13e4c5">
                           <label>Metadata datum (ISO nr. 9)</label>
                           <description>Metadata datum (ISO nr. 9) ontbreekt of heeft het verkeerde formaat (YYYY-MM-DD)</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dateStamp external; ((number(substring(substring-before($dateStamp,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'dateStamp': $dateStamp}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.9', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.9"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fde9-1e1b-11e8-d2e2-09173f13e4c5">
                           <label>Metadatastandaard naam (ISO nr. 10)</label>
                           <description>Metadatastandaard naam (ISO nr. 10) is niet correct ingevuld, Metadatastandaard naam dient de waarde 'ISO 19119' te hebben</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $metadataStandardName external; contains($metadataStandardName, 'ISO 19119')", map { '': $i, 'metadataStandardName': $metadataStandardName}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.10', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.10"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdf2-1e1b-11e8-d2e2-09173f13e4c5">
                           <label>Versie metadatastandaard  (ISO nr. 11)</label>
                           <description>Versie metadatastandaard (ISO nr. 11) is niet correct ingevuld, Metadatastandaard versie dient de waarde 'Nederlands metadata profiel op ISO 19119 voor services 1.2' te bevatten</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $metadataStandardVersion external; contains($metadataStandardVersion, 'PROFIEL OP ISO 19119')", map { '': $i, 'metadataStandardVersion': $metadataStandardVersion}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.11', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.11"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fdfa-1e1b-11e8-d2e2-09173f13e4c5">
                           <label>Metadata karakterset (ISO nr. 4)</label>
                           <description>Metadata karakterset (ISO nr. 4) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $metadataCharacterset external; declare variable $metadataCharacterset_value external; not($metadataCharacterset) or $metadataCharacterset_value", map { '': $i, 'metadataCharacterset': $metadataCharacterset, 'metadataCharacterset_value': $metadataCharacterset_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.12', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.12"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe36-1e1b-11e8-d2e2-09173f13e4c5">
                           <label>INSPIRE Specificaties (ISO nr. 360)</label>
                           <description>Specificatie (ISO nr. 360) mist de verplichte waarden voor INSPIRE services, Als dit geen INSPIRE service is verwijder dan de thesaurus GEMET -INSPIRE themes, voor INSPIRE service in specificatie opnemen; VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus_INSPIRE_Exsists external; declare variable $conformity_Spec_Title_Interoperability_Exsists external; not($thesaurus_INSPIRE_Exsists) or ($thesaurus_INSPIRE_Exsists and $conformity_Spec_Title_Interoperability_Exsists)", map { '': $i, 'thesaurus_INSPIRE_Exsists': $thesaurus_INSPIRE_Exsists, 'conformity_Spec_Title_Interoperability_Exsists': $conformity_Spec_Title_Interoperability_Exsists}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.13', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.13"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe76-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Service titel (ISO nr. 360)</label>
                           <description>Service titel (ISO nr. 360) ontbreekt</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $serviceTitle external; $serviceTitle", map { '': $i, 'serviceTitle': $serviceTitle}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.14', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.14"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe7e-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Datum van de bron (ISO nr. 394)</label>
                           <description>Datum van de bron (ISO nr. 394) ontbreekt of heeft het verkeerde formaat (YYYY-MM-DD)</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDate external; declare variable $creationDate external; declare variable $revisionDate external; declare variable $begin external; ($publicationDate or $creationDate or $revisionDate or $begin)", map { '': $i, 'publicationDate': $publicationDate, 'creationDate': $creationDate, 'revisionDate': $revisionDate, 'begin': $begin}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.15', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.15"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe85-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Samenvatting (ISO nr. 25)</label>
                           <description>Samenvatting (ISO nr. 25) ontbreekt</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $abstract external; $abstract", map { '': $i, 'abstract': $abstract}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.16', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.16"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe8d-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Verantwoordelijke organisatie bron (ISO nr. 376)</label>
                           <description>Verantwoordelijke organisatie bron (ISO nr. 376)) ontbreekt</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $responsibleParty_Organisation external; $responsibleParty_Organisation", map { '': $i, 'responsibleParty_Organisation': $responsibleParty_Organisation}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.17', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.17"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe95-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Rol verantwoordelijke organisatie bron (ISO nr. 379)</label>
                           <description>Rol verantwoordelijke organisatie bron (ISO nr. 379) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $responsibleParty_Role external; $responsibleParty_Role", map { '': $i, 'responsibleParty_Role': $responsibleParty_Role}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.18', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.18"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fe9c-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>E-mail verantwoordelijke organisatie bron (ISO nr. 386)</label>
                           <description>E-mail verantwoordelijke organisatie bron (ISO nr. 386) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $responsibleParty_Mail external; $responsibleParty_Mail", map { '': $i, 'responsibleParty_Mail': $responsibleParty_Mail}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.19', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.19"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fea4-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Trefwoorden (ISO nr. 53)</label>
                           <description>Trefwoorden (ISO nr. 53) ontbreekt of heeft de verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $keyword external; $keyword", map { '': $i, 'keyword': $keyword}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.20', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.20"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72feac-1e1b-11e8-d2e3-09173f13e4c5">
                           <label>Rol organisatie SDS(ISO nr. 379)</label>
                           <description>Rol organisatie (ISO nr. 379) ontbreekt of heeft een verkeerde waarde, voor INSPIRE interoperable SDS in ieder geval de rol beheerder opnemen</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Interop external; declare variable $responsibleParty_Role external; not($conformity_Spec_Title_SDS_Interop) or ($conformity_Spec_Title_SDS_Interop and contains($responsibleParty_Role, 'custodian'))", map { '': $i, 'conformity_Spec_Title_SDS_Interop': $conformity_Spec_Title_SDS_Interop, 'responsibleParty_Role': $responsibleParty_Role}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.21', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.21"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72feb0-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>Rol organisatie SDS harmo(ISO nr. 379)</label>
                           <description>Rol organisatie (ISO nr. 379) ontbreekt of heeft een verkeerde waarde, voor INSPIRE harmonised SDS in ieder geval de rol beheerder opnemen</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Harmo external; declare variable $responsibleParty_Role external; not($conformity_Spec_Title_SDS_Harmo) or ($conformity_Spec_Title_SDS_Harmo and contains($responsibleParty_Role, 'custodian'))", map { '': $i, 'conformity_Spec_Title_SDS_Harmo': $conformity_Spec_Title_SDS_Harmo, 'responsibleParty_Role': $responsibleParty_Role}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.22', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.22"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fec1-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>Gebruiksbeperkingen (ISO nr. 68)</label>
                           <description>Gebruiksbeperkingen (ISO nr. 68) ontbreken</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $useLimitation external; $useLimitation", map { '': $i, 'useLimitation': $useLimitation}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.23', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.23"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fecb-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>(Juridische) toegangsrestricties (ISO nr. 70) en Overige beperkingen (ISO nr 72)</label>
                           <description>(Juridische) toegangsrestricties (ISO nr. 70) en Overige beperkingen (ISO nr 72) dient ingevuld te zijn</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraints external; declare variable $accessConstraints_value external; $accessConstraints_value and $otherConstraints", map { '': $i, 'otherConstraints': $otherConstraints, 'accessConstraints_value': $accessConstraints_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.24', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.24"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fece-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>(Juridische) toegangsrestricties (ISO nr. 70)</label>
                           <description>(Juridische) toegangsrestricties (ISO nr. 70) dient de waarde 'anders' te hebben in combinatie met een publiek domein, CC0 of geogedeelt licentie bij overige beperkingen (ISO nr. 72)</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $accessConstraints_value external; $accessConstraints_value", map { '': $i, 'accessConstraints_value': $accessConstraints_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.25', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.25"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fed1-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>Overige beperkingen (ISO nr 72) en (Juridische) toegangsrestricties (ISO nr. 70)</label>
                           <description>Het element overige beperkingen (ISO nr. 72) dient een URL naar de publiek domein, CC0 of geogedeelt licentie te hebben als (juridische) toegangsrestricties (ISO nr. 70) de waarde 'anders' heeft</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraints external; declare variable $accessConstraints_value external; not($accessConstraints_value = 'otherRestrictions') or ($accessConstraints_value = 'otherRestrictions' and $otherConstraints)", map { '': $i, 'otherConstraints': $otherConstraints, 'accessConstraints_value': $accessConstraints_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.26', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.26"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fed5-1e1b-11e8-d2e4-09173f13e4c5">
                           <label>Overige beperkingen (ISO nr 72)</label>
                           <description>Het element overige beperkingen (ISO nr. 72) dient twee maal binnen dezelfde toegangsrestricties voor te komen; n met de beschrijving en n met de URL naar de publiek domein, CC0 of geogedeelt licentie,als (juridische) toegangsrestricties (ISO nr. 70) de waarde 'anders' heeft</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; declare variable $accessConstraints_value external; not($accessConstraints_value = 'otherRestrictions') or ($accessConstraints_value = 'otherRestrictions' and $otherConstraint1 and $otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2, 'accessConstraints_value': $accessConstraints_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.27', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.27"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff17-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>DCP waarde</label>
                           <description>DCP ontbreekt of heeft de verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dcp_value external; $dcp_value = 'WebServices'", map { '': $i, 'dcp_value': $dcp_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.28', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.28"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff20-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Operatie naam</label>
                           <description>Operatie naam ontbreekt of heeft de verkeerde waarde.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $operationName external; $operationName", map { '': $i, 'operationName': $operationName}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.29', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.29"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff2a-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Connect point linkage</label>
                           <description>Connect point linkage ontbreekt of heeft de verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; $connectPointString", map { '': $i, 'connectPointString': $connectPointString}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.30', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.30"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff33-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator en connectpoint Linkage 1</label>
                           <description>Resource locator heeft niet dezelfde waarde als connectpoint Linkage</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; declare variable $resourceLocatorString external; declare variable $connectPoint external; declare variable $resourceLocator external; not((not($connectPoint) and not($resourceLocator)) and not($resourceLocatorString=$connectPointString))", map { '': $i, 'connectPointString': $connectPointString, 'resourceLocatorString': $resourceLocatorString, 'connectPoint': $connectPoint, 'resourceLocator': $resourceLocator}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.31', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.31"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff36-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator en connectpoint Linkage 2</label>
                           <description>Resource locator heeft niet dezelfde waarde als connectpoint Linkage</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; declare variable $connectPoint external; declare variable $resourceLocator external; not(($connectPoint and not($resourceLocator)) and not($resourceLocatorString=$connectPoint))", map { '': $i, 'resourceLocatorString': $resourceLocatorString, 'connectPoint': $connectPoint, 'resourceLocator': $resourceLocator}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.32', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.32"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff39-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator en connectpoint Linkage 3</label>
                           <description>Resource locator heeft niet dezelfde waarde als connectpoint Linkage</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; declare variable $connectPoint external; declare variable $resourceLocator external; not(($resourceLocator and not($connectPoint)) and not($resourceLocator=$connectPointString))", map { '': $i, 'connectPointString': $connectPointString, 'connectPoint': $connectPoint, 'resourceLocator': $resourceLocator}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.33', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.33"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff3d-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator en connectpoint Linkage 4</label>
                           <description>Resource locator heeft niet dezelfde waarde als connectpoint Linkage</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPoint external; declare variable $resourceLocator external; not(($connectPoint and $resourceLocator) and not($resourceLocator=$connectPoint))", map { '': $i, 'connectPoint': $connectPoint, 'resourceLocator': $resourceLocator}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.34', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.34"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff40-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator</label>
                           <description>Resource locator is verplicht als er een link is naar de service</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; $resourceLocatorString", map { '': $i, 'resourceLocatorString': $resourceLocatorString}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.35', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.35"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff4a-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Protocol (ISO nr. 398)</label>
                           <description>Protocol (ISO nr. 398) is verplicht als Resource locator is ingevuld.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; declare variable $transferOptions_Protocol external; not($resourceLocatorString) or ($resourceLocatorString and $transferOptions_Protocol)", map { '': $i, 'resourceLocatorString': $resourceLocatorString, 'transferOptions_Protocol': $transferOptions_Protocol}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.36', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.36"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff55-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Service type</label>
                           <description>Service type ontbreekt of heeft de verkeerde waarde, gebruik view of download voor services die aan betreffende specificaties van INSPIRE voldoen, in andere gevallen de waarde other.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $serviceType external; $serviceType", map { '': $i, 'serviceType': $serviceType}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.37', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.37"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff5e-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Service type en network specificatie</label>
                           <description>Service type ontbreekt of heeft de verkeerde waarde, gebruik view of download voor services die aan betreffende specificaties van INSPIRE voldoen.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_Network_Exsists external; declare variable $serviceType_Networkservice external; not($conformity_Spec_Title_Network_Exsists) or ($conformity_Spec_Title_Network_Exsists and $serviceType_Networkservice)", map { '': $i, 'conformity_Spec_Title_Network_Exsists': $conformity_Spec_Title_Network_Exsists, 'serviceType_Networkservice': $serviceType_Networkservice}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.38', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.38"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff61-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Service type en SDS specificatie</label>
                           <description>Service type ontbreekt of heeft de verkeerde waarde, gebruik de waarde other voor SDS services die aan betreffende specificaties van INSPIRE voldoen.</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Exsists external; declare variable $serviceType_Other external; not($conformity_Spec_Title_SDS_Exsists) or ($conformity_Spec_Title_SDS_Exsists and $serviceType_Other)", map { '': $i, 'conformity_Spec_Title_SDS_Exsists': $conformity_Spec_Title_SDS_Exsists, 'serviceType_Other': $serviceType_Other}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.39', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.39"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff6d-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Beschrijving</label>
                           <description>beschrijving ontbreekt of heeft de verkeerde waarde, gebruik voor INSPIRE SDS de waarde accessPoint</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Exsists external; declare variable $description external; not($conformity_Spec_Title_SDS_Exsists) or ($conformity_Spec_Title_SDS_Exsists and $description = 'accessPoint')", map { '': $i, 'conformity_Spec_Title_SDS_Exsists': $conformity_Spec_Title_SDS_Exsists, 'description': $description}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.40', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.40"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff74-1e1b-11e8-d2e5-09173f13e4c5">
                           <label>Resource locator getCapabilities</label>
                           <description>Resource locator naar de service moet een getCapabilities request bevatten</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; declare variable $conformity_Spec_Title_SDS_Exsists external; declare variable $resourceLocatorString external; not($conformity_Spec_Title_SDS_Exsists) or ($conformity_Spec_Title_SDS_Exsists and contains(translate($resourceLocatorString, $lowercase, $uppercase),'GETCAPABILITIES'))", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase, 'conformity_Spec_Title_SDS_Exsists': $conformity_Spec_Title_SDS_Exsists, 'resourceLocatorString': $resourceLocatorString}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.41', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.41"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff7b-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Coupling type</label>
                           <description>Coupling type ontbreekt of heeft de verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $couplingType external; $couplingType", map { '': $i, 'couplingType': $couplingType}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.42', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.42"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff88-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>CoupledResouce met xlink en uuidref</label>
                           <description>CoupledResouce met xlink en uuidref is verplicht indien data aan de service is gekoppeld (coupled resource 'tight' of 'mixed').</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $couplingType_value external; declare variable $coupledResouceXlink external; declare variable $coupledResouceUUID external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and  ($coupledResouceXlink and $coupledResouceUUID))", map { '': $i, 'couplingType_value': $couplingType_value, 'coupledResouceXlink': $coupledResouceXlink, 'coupledResouceUUID': $coupledResouceUUID}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.43', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.43"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff8d-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Geografisch gebied</label>
                           <description>Geografisch gebied is verplicht indien data aan de service is gekoppeld (coupled resource 'tight' of 'mixed').</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $geographicLocation external; declare variable $couplingType_value external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and $geographicLocation)", map { '': $i, 'geographicLocation': $geographicLocation, 'couplingType_value': $couplingType_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.44', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.44"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff96-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Minimum x-cordinaat (ISO nr. 344)</label>
                           <description>Minimum x-cordinaat (ISO nr. 344) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $west external; declare variable $couplingType_value external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and (-180.00 &lt; $west) and ( $west &lt; 180.00) or ( $west = 0.00 ) or ( $west = -180.00 ) or ( $west = 180.00 ))", map { '': $i, 'west': $west, 'couplingType_value': $couplingType_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.45', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.45"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ff9e-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Maximum x-cordinaat (ISO nr. 345)</label>
                           <description>Maximum x-cordinaat (ISO nr. 345) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $east external; declare variable $couplingType_value external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and (-180.00 &lt; $east) and ($east &lt; 180.00) or ( $east = 0.00 ) or ( $east = -180.00 ) or ( $east = 180.00 ))", map { '': $i, 'east': $east, 'couplingType_value': $couplingType_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.46', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.46"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ffa6-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Minimum y-cordinaat (ISO nr. 346)</label>
                           <description>Minimum y-cordinaat (ISO nr. 346) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $north external; declare variable $south external; declare variable $couplingType_value external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and (-90.00 &lt; $south) and ($south &lt; $north) or (-90.00 = $south) or ($south = $north))", map { '': $i, 'north': $north, 'south': $south, 'couplingType_value': $couplingType_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.47', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.47"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ffaf-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Maximum y-cordinaat (ISO nr. 347)</label>
                           <description>Maximum y-cordinaat (ISO nr. 347) ontbreekt of heeft een verkeerde waarde</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $north external; declare variable $south external; declare variable $couplingType_value external; not($couplingType_value='tight' or $couplingType_value='mixed') or (($couplingType_value='tight' or $couplingType_value='mixed') and ($south &lt; $north) and ($north &lt; 90.00) or ($south = $north) or ($north = 90.00))", map { '': $i, 'north': $north, 'south': $south, 'couplingType_value': $couplingType_value}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.48', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.48"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ffc0-1e1b-11e8-d2e6-09173f13e4c5">
                           <label>Niveau kwaliteitsbeschrijving (ISO nr.139)</label>
                           <description>Niveau kwaliteitsbeschrijving (ISO nr.139) ontbreekt of heeft een verkeerde waarde. Alleen 'service' is toegestaan</description>
                           <parent ref="EID9c72f554-1e1b-11e8-d415-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file/gmd:MD_Metadata
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $fileIdentifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:fileIdentifier/gco:CharacterString)", map { '': $i})

let $mdLanguage := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; (gmd:language/*/@codeListValue = 'dut' or gmd:language/*/@codeListValue = 'eng')", map { '': $i})

let $mdLanguage_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:language/*/@codeListValue)", map { '': $i})

let $hierarchyLevel := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:hierarchyLevel[1]/*/@codeListValue = 'service'", map { '': $i})

let $hierarchyLevel_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:hierarchyLevel[1]/*/@codeListValue)", map { '': $i})

let $mdResponsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $mdResponsibleParty_Role_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/*/gmd:role/*/@codeListValue = 'pointOfContact'", map { '': $i})

let $mdResponsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:contact[1]/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'resourceProvider' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'custodian' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'user' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'distributor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'owner' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'originator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'pointOfContact' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'principalInvestigator' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'processor' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'publisher' or gmd:contact/gmd:CI_ResponsibleParty/gmd:role/*/@codeListValue = 'author'", map { '': $i})

let $mdResponsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:contact[1]/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $dateStamp := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:dateStamp/gco:Date))", map { '': $i})

let $metadataStandardName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardName/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataStandardVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $lowercase external; declare variable $uppercase external; translate(normalize-space(gmd:metadataStandardVersion/gco:CharacterString), $lowercase, $uppercase)", map { '': $i, 'lowercase': $lowercase, 'uppercase': $uppercase})

let $metadataCharacterset := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:characterSet/*/@codeListValue)", map { '': $i})

let $metadataCharacterset_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:characterSet/*[@codeListValue ='ucs2' or @codeListValue ='ucs4' or @codeListValue ='utf7' or @codeListValue ='utf8' or @codeListValue ='utf16' or @codeListValue ='8859part1' or @codeListValue ='8859part2' or @codeListValue ='8859part3' or @codeListValue ='8859part4' or @codeListValue ='8859part5' or @codeListValue ='8859part6' or @codeListValue ='8859part7' or @codeListValue ='8859part8' or @codeListValue ='8859part9' or @codeListValue ='8859part10' or @codeListValue ='8859part11' or  @codeListValue ='8859part12' or @codeListValue ='8859part13' or @codeListValue ='8859part14' or @codeListValue ='8859part15' or @codeListValue ='8859part16' or @codeListValue ='jis' or @codeListValue ='shiftJIS' or @codeListValue ='eucJP' or @codeListValue ='usAscii' or @codeListValue ='ebcdic' or @codeListValue ='eucKR' or @codeListValue ='big5' or @codeListValue ='GB2312']", map { '': $i})

let $serviceTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:title/gco:CharacterString)", map { '': $i})

let $publicationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $publicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $publicationDateString external; ((number(substring(substring-before($publicationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'publicationDateString': $publicationDateString})

let $creationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $creationDateString external; ((number(substring(substring-before($creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'creationDateString': $creationDateString})

let $revisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $revisionDateString external; ((number(substring(substring-before($revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'revisionDateString': $revisionDateString})

let $abstract := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:abstract/gco:CharacterString)", map { '': $i})

let $responsibleParty_Organisation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:organisationName/gco:CharacterString)", map { '': $i})

let $responsibleParty_Role := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:role/*/@codeListValue[. = 'resourceProvider' or . = 'custodian' or . = 'owner' or . = 'user' or . = 'distributor' or . = 'owner' or . = 'originator' or . = 'pointOfContact' or . = 'principalInvestigator' or . = 'processor' or . = 'publisher' or . = 'author']", map { '': $i})

let $responsibleParty_Mail := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:pointOfContact[1]/*/gmd:contactInfo/*/gmd:address[1]/*/gmd:electronicMailAddress[1]/gco:CharacterString)", map { '': $i})

let $keyword_INSPIRE := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space((gmd:identificationInfo[1]/*/gmd:descriptiveKeywords/*/gmd:keyword/gco:CharacterString    [text() = 'infoFeatureAccessService'    or text() = 'infoMapAccessService'    or text() = 'infoCoverageAccessService'    or text() = 'infoSensorDescriptionService'    or text() = 'infoFeatureTypeService'    or text() = 'infoProductAccessService'    or text() = 'infoCatalogueService'    or text() = 'infoGazetteerService'    or text() = 'humanGeographicViewer'])[1])", map { '': $i})

let $keyword := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:descriptiveKeywords[1]/*/gmd:keyword[1]/gco:CharacterString)", map { '': $i})

let $identifier := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:citation/*/gmd:identifier/*/gmd:code/gco:CharacterString)", map { '': $i})

let $useLimitation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[1]/gmd:MD_Constraints/gmd:useLimitation[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[1]/gco:CharacterString)", map { '': $i})

let $otherConstraint2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/gmd:MD_LegalConstraints/gmd:otherConstraints[2]/gco:CharacterString)", map { '': $i})

let $otherConstraints := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $otherConstraint1 external; declare variable $otherConstraint2 external; concat($otherConstraint1,$otherConstraint2)", map { '': $i, 'otherConstraint1': $otherConstraint1, 'otherConstraint2': $otherConstraint2})

let $accessConstraints_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/gmd:resourceConstraints[2]/*/gmd:accessConstraints/*/@codeListValue[ . = 'otherRestrictions'])", map { '': $i})

let $geographicLocation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement[1])", map { '': $i})

let $west := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $east := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude[1]/gco:Decimal)", map { '': $i})

let $north := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $south := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; number(gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude[1]/gco:Decimal)", map { '': $i})

let $begin_beginPosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition[1])", map { '': $i})

let $begin_begintimePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:begin/*/gml:timePosition[1])", map { '': $i})

let $begin_timePosition := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo/*/srv:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:timePosition[1])", map { '': $i})

let $begin := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $begin_beginPosition external; declare variable $begin_begintimePosition external; declare variable $begin_timePosition external; $begin_beginPosition or $begin_begintimePosition or $begin_timePosition", map { '': $i, 'begin_beginPosition': $begin_beginPosition, 'begin_begintimePosition': $begin_begintimePosition, 'begin_timePosition': $begin_timePosition})

let $dcp_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:DCP/*/@codeListValue))", map { '': $i})

let $operationName := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:operationName/gco:CharacterString)", map { '': $i})

let $connectPointString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:containsOperations[1]/*/srv:connectPoint/*/gmd:linkage/gmd:URL)", map { '': $i})

let $resourceLocatorString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:linkage/gmd:URL)", map { '': $i})

let $connectPoint := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $connectPointString external; normalize-space(substring-before($connectPointString,'?'))", map { '': $i, 'connectPointString': $connectPointString})

let $resourceLocator := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $resourceLocatorString external; normalize-space(substring-before($resourceLocatorString,'?'))", map { '': $i, 'resourceLocatorString': $resourceLocatorString})

let $transferOptions_Protocol := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:CSW' or text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS' or text() = 'OGC:WCTS' or text() = 'OGC:WPS' or text() = 'UKST' or text() = 'OGC:WMC' or text() = 'OGC:KML' or text() = 'OGC:GML' or text() = 'OGC:WFS-G' or text() = 'OGC:SOS' or text() = 'OGC:SPS' or text() = 'OGC:SAS' or text() = 'OGC:WNS' or text() = 'OGC:ODS' or text() = 'OGC:OGS' or text() = 'OGC:OUS' or text() = 'OGC:OPS' or text() = 'OGC:ORS'  or text() = 'OGC:WMTS' or text() = 'INSPIRE Atom']", map { '': $i})

let $transferOptions_Protocol_isOGCService := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:protocol/*[text() = 'OGC:WMS' or text() = 'OGC:WFS' or text() = 'OGC:WCS']", map { '': $i})

let $description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine[1]/gmd:CI_OnlineResource/gmd:description/gco:CharacterString)", map { '': $i})

let $serviceType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*/text()", map { '': $i})

let $serviceType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'       or text() = 'download'       or text() = 'discovery'       or text() = 'transformation'        or text() = 'invoke'        or text() = 'other']", map { '': $i})

let $serviceType_Networkservice := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'view'     or text() = 'download'     or text() = 'discovery'])", map { '': $i})

let $serviceType_Other := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceType/*[text() = 'other'])", map { '': $i})

let $serviceTypeVersion := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:identificationInfo[1]/*/srv:serviceTypeVersion/gco:CharacterString)", map { '': $i})

let $couplingType_value := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue)", map { '': $i})

let $couplingType := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:identificationInfo[1]/*/srv:couplingType/*/@codeListValue[. ='tight' or . ='mixed' or . ='loose']", map { '': $i})

let $coupledResouceXlink := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@xlink:href))", map { '': $i})

let $coupledResouceUUID := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(string(gmd:identificationInfo[1]/srv:SV_ServiceIdentification/srv:operatesOn[1]/@uuidref))", map { '': $i})

let $dataQualityInfo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:dataQualityInfo/gmd:DQ_DataQuality", map { '': $i})

let $level := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $dataQualityInfo external; string($dataQualityInfo/gmd:scope/gmd:DQ_Scope/gmd:level/*/@codeListValue[. = 'service'])", map { '': $i, 'dataQualityInfo': $dataQualityInfo})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $level external; $level", map { '': $i, 'level': $level}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.1.49', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.1.49"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c72ffcb-1e1b-11e8-d2e6-09173f13e4c5">
               <label>Conformiteit specificaties</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f555-1e1b-11e8-d514-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c72ffcb-1e1b-11e8-d2e6-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c72ffed-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Verklaring (ISO nr. 131) en Specificatie (ISO nr. 360)</label>
                           <description>Verklaring (ISO nr. 131) is verplicht als een specificatie is opgegeven.</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Explanation external; not($conformity_SpecTitle) or ($conformity_SpecTitle and $conformity_Explanation)", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Explanation': $conformity_Explanation}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fff0-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Datum (ISO nr. 394) en Specificatie (ISO nr. 360)</label>
                           <description>Datum (ISO nr. 394) is verplicht als een specificatie is opgegeven.</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Date external; not($conformity_SpecTitle and not($conformity_Date))", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Date': $conformity_Date}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.2', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.2"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fff3-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Datumtype (ISO nr. 395) en Specificatie (ISO nr. 360)</label>
                           <description>Datumtype (ISO nr. 395) is verplicht als een specificatie is opgegeven.</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Datetype external; not($conformity_SpecTitle and not($conformity_Datetype))", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Datetype': $conformity_Datetype}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.3', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.3"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fff6-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Conformiteit (ISO nr. 132) en Specificatie (ISO nr. 360)</label>
                           <description>Conformiteit (ISO nr. 132) is verplicht als een specificatie is opgegeven.</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Pass external; not($conformity_SpecTitle) or ($conformity_SpecTitle and $conformity_Pass)", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Pass': $conformity_Pass}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.4', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.4"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72fffb-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Verklaring (ISO nr. 131)</label>
                           <description>Verklaring (ISO nr. 131) hoort leeg als geen specificatie is opgegeven</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Explanation external; not($conformity_Explanation) or ($conformity_Explanation and $conformity_SpecTitle)", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Explanation': $conformity_Explanation}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.5', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.5"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c72ffff-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Datum (ISO nr. 394)</label>
                           <description>Datum (ISO nr. 394) hoort leeg als geen specificatie is opgegeven..</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Date external; not($conformity_Date and not($conformity_SpecTitle))", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Date': $conformity_Date}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.6', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.6"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730002-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Datumtype (ISO nr. 395)</label>
                           <description>Datumtype (ISO nr. 395) hoort leeg als geen specificatie is opgegeven..</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Datetype external; not($conformity_Datetype and not($conformity_SpecTitle))", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Datetype': $conformity_Datetype}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.7', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.7"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730005-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Conformiteit (ISO nr. 132)</label>
                           <description>Conformiteit (ISO nr. 132) hoort leeg als geen specificatie is opgegeven..</description>
                           <parent ref="EID9c72f555-1e1b-11e8-d514-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_SpecTitle := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $i})

let $conformity_Explanation := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:explanation/gco:CharacterString)", map { '': $i})

let $conformity_DateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date)", map { '': $i})

let $conformity_Date := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_DateString external; ((number(substring(substring-before($conformity_DateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'conformity_DateString': $conformity_DateString})

let $conformity_Datetype := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/*[@codeListValue='creation' or @codeListValue='publication' or @codeListValue='revision']", map { '': $i})

let $conformity_SpecCreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecPublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_SpecRevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; gmd:specification/gmd:CI_Citation/gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date", map { '': $i})

let $conformity_Pass := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:pass/gco:Boolean)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_SpecTitle external; declare variable $conformity_Pass external; not($conformity_Pass) or ($conformity_Pass and $conformity_SpecTitle)", map { '': $i, 'conformity_SpecTitle': $conformity_SpecTitle, 'conformity_Pass': $conformity_Pass}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.2.8', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.2.8"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c730039-1e1b-11e8-d2e7-09173f13e4c5">
               <label>Relatie met de dataset</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f556-1e1b-11e8-d649-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c730039-1e1b-11e8-d2e7-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c73003b-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Coupled resource uuidref attribuut</label>
                           <description>Coupled resource heeft geen uuidref attribuut bij het element operatesOn</description>
                           <parent ref="EID9c72f556-1e1b-11e8-d649-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(normalize-space(@uuidref))", map { '': $i}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.3.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.3.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c73003e-1e1b-11e8-d2e7-09173f13e4c5">
                           <label>Coupled resource xlink:href attribuut</label>
                           <description>Coupled resource heeft geen xlink:href attribuut bij het element operatesOn</description>
                           <parent ref="EID9c72f556-1e1b-11e8-d649-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:operatesOn
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(normalize-space(@xlink:href))", map { '': $i}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.3.2', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.3.2"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c730044-1e1b-11e8-d2e8-09173f13e4c5">
               <label>INSPIRE SDS alle service kwaliteit</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f557-1e1b-11e8-d715-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c730044-1e1b-11e8-d2e8-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c730057-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit (ISO nr. 100 ) availability</label>
                           <description>De beschikbaarheid van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Interop external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Interop) or ($conformity_Spec_Title_SDS_Interop and contains($all_quality_measures_join, 'availability'))", map { '': $i, 'conformity_Spec_Title_SDS_Interop': $conformity_Spec_Title_SDS_Interop, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c73005a-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit (ISO nr. 100) performance</label>
                           <description>De performance van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Interop external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Interop) or ($conformity_Spec_Title_SDS_Interop and contains($all_quality_measures_join, 'performance'))", map { '': $i, 'conformity_Spec_Title_SDS_Interop': $conformity_Spec_Title_SDS_Interop, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.2', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.2"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c73005d-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit (ISO nr. 100 ) capacity</label>
                           <description>De capaciteit van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Interop external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Interop) or ($conformity_Spec_Title_SDS_Interop and contains($all_quality_measures_join, 'capacity'))", map { '': $i, 'conformity_Spec_Title_SDS_Interop': $conformity_Spec_Title_SDS_Interop, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.3', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.3"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730061-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS harmo service kwaliteit (ISO nr. 100 ) availability</label>
                           <description>De beschikbaarheid van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Harmo external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Harmo) or ($conformity_Spec_Title_SDS_Harmo and contains($all_quality_measures_join, 'availability'))", map { '': $i, 'conformity_Spec_Title_SDS_Harmo': $conformity_Spec_Title_SDS_Harmo, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.4', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.4"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730064-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS harmo service kwaliteit (ISO nr. 100) performance</label>
                           <description>De performance van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Harmo external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Harmo) or ($conformity_Spec_Title_SDS_Harmo and contains($all_quality_measures_join, 'performance'))", map { '': $i, 'conformity_Spec_Title_SDS_Harmo': $conformity_Spec_Title_SDS_Harmo, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.5', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.5"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730067-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS harmo service kwaliteit (ISO nr. 100 ) capacity</label>
                           <description>De capaciteit van de service is niet beschreven</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Harmo external; declare variable $all_quality_measures_join external; not($conformity_Spec_Title_SDS_Harmo) or ($conformity_Spec_Title_SDS_Harmo and contains($all_quality_measures_join, 'capacity'))", map { '': $i, 'conformity_Spec_Title_SDS_Harmo': $conformity_Spec_Title_SDS_Harmo, 'all_quality_measures_join': $all_quality_measures_join}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.6', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.6"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c73006f-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit identificatie (ISO nr. 101 )</label>
                           <description>Identificatie van service kwaliteitsmeeting (ISO nr. 101) is verplicht als een meeting is opgegeven.</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $quality_name_Of_Measure external; declare variable $quality_measure_Identification external; not($quality_name_Of_Measure) or ($quality_name_Of_Measure and $quality_measure_Identification)", map { '': $i, 'quality_name_Of_Measure': $quality_name_Of_Measure, 'quality_measure_Identification': $quality_measure_Identification}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.7', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.7"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730072-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit beschrijving (ISO nr. 102 )</label>
                           <description>Beschrijving van service kwaliteit (ISO nr. 102) is verplicht als een meeting is opgegeven.</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $quality_name_Of_Measure external; declare variable $quality_measure_Description external; not($quality_name_Of_Measure) or ($quality_name_Of_Measure and $quality_measure_Description)", map { '': $i, 'quality_name_Of_Measure': $quality_name_Of_Measure, 'quality_measure_Description': $quality_measure_Description}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.8', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.8"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730076-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit resultaat (ISO nr. 107 )</label>
                           <description>Resultaat van service kwaliteit (ISO nr. 107) is verplicht als een meeting is opgegeven.</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $quality_name_Of_Measure external; declare variable $quality_result external; not($quality_name_Of_Measure) or ($quality_name_Of_Measure and $quality_result)", map { '': $i, 'quality_name_Of_Measure': $quality_name_Of_Measure, 'quality_result': $quality_result}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.9', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.9"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730079-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>INSPIRE SDS service kwaliteit eenheid waarde (ISO nr. 107 )</label>
                           <description>Voor resultaat van service kwaliteit (ISO nr. 107) is ook een eenheid verplicht als een meeting is opgegeven.</description>
                           <parent ref="EID9c72f557-1e1b-11e8-d715-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $all_quality_measures := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; ancestor::gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_ConceptualConsistency/gmd:nameOfMeasure", map { '': $i})

let $all_quality_measures_join := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $all_quality_measures external; normalize-space(string-join(($all_quality_measures), ','))", map { '': $i, 'all_quality_measures': $all_quality_measures})

let $quality_name_Of_Measure := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:nameOfMeasure/gco:CharacterString)", map { '': $i})

let $quality_measure_Identification := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureIdentification/gmd:MD_Identifier/gmd:code/gco:CharacterString)", map { '': $i})

let $quality_measure_Description := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:measureDescription/gco:CharacterString)", map { '': $i})

let $quality_result := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record)", map { '': $i})

let $quality_value_unit := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@xlink:href)", map { '': $i})

let $quality_value_unit_Reason := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; contains(normalize-space(gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/@gco:nilReason),'inapplicable')", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $quality_name_Of_Measure external; declare variable $quality_value_unit external; declare variable $quality_value_unit_Reason external; not($quality_name_Of_Measure) or ($quality_name_Of_Measure and ($quality_value_unit or $quality_value_unit_Reason))", map { '': $i, 'quality_name_Of_Measure': $quality_name_Of_Measure, 'quality_value_unit': $quality_value_unit, 'quality_value_unit_Reason': $quality_value_unit_Reason}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.4.10', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.4.10"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c730081-1e1b-11e8-d2e8-09173f13e4c5">
               <label>Referentiesysteem</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f558-1e1b-11e8-d819-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c730081-1e1b-11e8-d2e8-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c730085-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>Code referentiesysteem (ISO nr. 207) SDS</label>
                           <description>Code referentiesysteem (ISO nr. 207) ontbreekt, dit moet voor INSPIRE interoperable SDS een URI, bv http://www.opengis.net/def/crs/EPSG/0/28992 zijn</description>
                           <parent ref="EID9c72f558-1e1b-11e8-d819-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $referenceSystemInfo_Code := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:code/gco:CharacterString)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Interop external; declare variable $referenceSystemInfo_Code external; not($conformity_Spec_Title_SDS_Interop) or ($conformity_Spec_Title_SDS_Interop and $referenceSystemInfo_Code)", map { '': $i, 'conformity_Spec_Title_SDS_Interop': $conformity_Spec_Title_SDS_Interop, 'referenceSystemInfo_Code': $referenceSystemInfo_Code}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.5.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.5.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                        <TestAssertion id="EID9c730088-1e1b-11e8-d2e8-09173f13e4c5">
                           <label>Code referentiesysteem (ISO nr. 207) SDS harmo</label>
                           <description>Code referentiesysteem (ISO nr. 207) ontbreekt, dit moet voor INSPIRE harmonised SDS een URI, bv http://www.opengis.net/def/crs/EPSG/0/28992 zijn</description>
                           <parent ref="EID9c72f558-1e1b-11e8-d819-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier/gmd:RS_Identifier
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $referenceSystemInfo_Code := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:code/gco:CharacterString)", map { '': $i})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_SDS_Harmo external; declare variable $referenceSystemInfo_Code external; not($conformity_Spec_Title_SDS_Harmo) or ($conformity_Spec_Title_SDS_Harmo and $referenceSystemInfo_Code)", map { '': $i, 'conformity_Spec_Title_SDS_Harmo': $conformity_Spec_Title_SDS_Harmo, 'referenceSystemInfo_Code': $referenceSystemInfo_Code}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.5.2', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.5.2"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c730096-1e1b-11e8-d2e8-09173f13e4c5">
               <label>Thesaurus</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f559-1e1b-11e8-d973-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c730096-1e1b-11e8-d2e8-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c7300af-1e1b-11e8-d2e9-09173f13e4c5">
                           <label>thesaurus datum (ISO nr.394) en datumtype (ISO nr. 395)</label>
                           <description>Als er gebruik wordt gemaakt van een thesaurus dient de datum (ISO nr.394) en datumtype (ISO nr. 395) opgegeven te worden. Datum formaat moet YYYY-MM-DD zijn.</description>
                           <parent ref="EID9c72f559-1e1b-11e8-d973-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords/*/gmd:thesaurusName/gmd:CI_Citation
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $thesaurus_Title := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(gmd:title/gco:CharacterString)", map { '': $i})

let $thesaurus_publicationDateSring := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/gco:Date)", map { '': $i})

let $thesaurus_creationDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/gco:Date)", map { '': $i})

let $thesaurus_revisionDateString := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; string(gmd:date[./gmd:CI_Date/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/gco:Date)", map { '': $i})

let $thesaurus_PublicationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus_publicationDateSring external; ((number(substring(substring-before($thesaurus_publicationDateSring,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'thesaurus_publicationDateSring': $thesaurus_publicationDateSring})

let $thesaurus_CreationDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus_creationDateString external; ((number(substring(substring-before($thesaurus_creationDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'thesaurus_creationDateString': $thesaurus_creationDateString})

let $thesaurus_RevisionDate := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus_revisionDateString external; ((number(substring(substring-before($thesaurus_revisionDateString,'-'),1,4)) &gt; 1000 ))", map { '': $i, 'thesaurus_revisionDateString': $thesaurus_revisionDateString})

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus_Title external; declare variable $thesaurus_PublicationDate external; declare variable $thesaurus_CreationDate external; declare variable $thesaurus_RevisionDate external; not($thesaurus_Title) or ($thesaurus_Title and ($thesaurus_CreationDate or $thesaurus_PublicationDate or $thesaurus_RevisionDate))", map { '': $i, 'thesaurus_Title': $thesaurus_Title, 'thesaurus_PublicationDate': $thesaurus_PublicationDate, 'thesaurus_CreationDate': $thesaurus_CreationDate, 'thesaurus_RevisionDate': $thesaurus_RevisionDate}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.6.1', map { 'filename': local:filename($error)  }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.6.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
            <TestCase id="EID9c7300b9-1e1b-11e8-d2e9-09173f13e4c5">
               <label>INSPIRE Thesaurus trefwoorden</label>
               <description>...</description>
               <parent ref="EID9c72f62c-1e1b-11e8-d2e2-09173f13e4c5"/>
               <testSteps>
                  <TestStep id="EID9c72f55a-1e1b-11e8-d107-09173f13e4c5">
                     <label>IGNORE</label>
                     <description>IGNORE</description>
                     <parent ref="EID9c7300b9-1e1b-11e8-d2e9-09173f13e4c5"/>
                     <statementForExecution>not applicable</statementForExecution>
                     <testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/>
                     <testAssertions>
                        <TestAssertion id="EID9c7300bd-1e1b-11e8-d2e9-09173f13e4c5">
                           <label>INSPIRE Trefwoorden (ISO nr. 53) uit thesaurus</label>
                           <description>Deze keywords komen niet overeen met GEMET- INSPIRE themes thesaurus. gevonden keywords:</description>
                           <parent ref="EID9c72f55a-1e1b-11e8-d107-09173f13e4c5"/>
                           <expectedResult>NOT_APPLICABLE</expectedResult>
                           <expression>

let $errors := for $file in $db
return
for $i in $file//gmd:MD_Metadata/gmd:identificationInfo[1]/*/gmd:descriptiveKeywords    [normalize-space(gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title) = 'GEMET - INSPIRE themes, version 1.0']    /gmd:MD_Keywords/gmd:keyword
let $lowercase := 'abcdefghijklmnopqrstuvwxyz'
let $uppercase := 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

let $thesaurus1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[1]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[2]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[3]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[4]/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $thesaurus := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus1 external; declare variable $thesaurus2 external; declare variable $thesaurus3 external; declare variable $thesaurus4 external; concat(string($thesaurus1),string($thesaurus2),string($thesaurus3),string($thesaurus4))", map { '': $file, 'thesaurus1': $thesaurus1, 'thesaurus2': $thesaurus2, 'thesaurus3': $thesaurus3, 'thesaurus4': $thesaurus4})

let $thesaurus_INSPIRE_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $thesaurus external; contains($thesaurus,'GEMET - INSPIRE themes, version 1.0')", map { '': $file, 'thesaurus': $thesaurus})

let $conformity_Spec_Title1 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[1]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title2 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[2]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title3 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[3]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title4 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[4]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title5 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[5]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title6 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[6]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title7 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[7]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title8 := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; normalize-space(//gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report[8]/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/gmd:title/gco:CharacterString)", map { '': $file})

let $conformity_Spec_Title_All := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title1 external; declare variable $conformity_Spec_Title2 external; declare variable $conformity_Spec_Title3 external; declare variable $conformity_Spec_Title4 external; declare variable $conformity_Spec_Title5 external; declare variable $conformity_Spec_Title6 external; declare variable $conformity_Spec_Title7 external; declare variable $conformity_Spec_Title8 external; concat(string($conformity_Spec_Title1),string($conformity_Spec_Title2),string($conformity_Spec_Title3),string($conformity_Spec_Title4),string($conformity_Spec_Title5),string($conformity_Spec_Title6),string($conformity_Spec_Title7),string($conformity_Spec_Title8))", map { '': $file, 'conformity_Spec_Title1': $conformity_Spec_Title1, 'conformity_Spec_Title2': $conformity_Spec_Title2, 'conformity_Spec_Title3': $conformity_Spec_Title3, 'conformity_Spec_Title4': $conformity_Spec_Title4, 'conformity_Spec_Title5': $conformity_Spec_Title5, 'conformity_Spec_Title6': $conformity_Spec_Title6, 'conformity_Spec_Title7': $conformity_Spec_Title7, 'conformity_Spec_Title8': $conformity_Spec_Title8})

let $conformity_Spec_Title_Interoperability_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EU) Nr. 1089/2010 VAN DE COMMISSIE van 23 november 2010 ter uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad betreffende de interoperabiliteit van verzamelingen ruimtelijke gegevens en van diensten met betrekking tot ruimtelijke gegevens')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_Network_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'VERORDENING (EG) Nr. 976/2009 VAN DE COMMISSIE van 19 oktober 2009 tot uitvoering van Richtlijn 2007/2/EG van het Europees Parlement en de Raad wat betreft de netwerkdiensten')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Exsists := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; (contains($conformity_Spec_Title_All,'invocable') or contains($conformity_Spec_Title_All,'interoperable') or contains($conformity_Spec_Title_All,'harmonised'))", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Invoc := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'invocable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Interop := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'interoperable')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})

let $conformity_Spec_Title_SDS_Harmo := xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $conformity_Spec_Title_All external; contains($conformity_Spec_Title_All,'harmonised')", map { '': $file, 'conformity_Spec_Title_All': $conformity_Spec_Title_All})
                let $quote := "'"

where not(xquery:eval("declare namespace gmd='http://www.isotc211.org/2005/gmd'; declare namespace gco='http://www.isotc211.org/2005/gco'; declare namespace srv='http://www.isotc211.org/2005/srv'; declare namespace xlink='http://www.w3.org/1999/xlink'; declare namespace gml='http://www.opengis.net/gml'; declare namespace xsi='http://www.w3.org/2001/XMLSchema-instance'; declare variable $quote external; ((normalize-space(.)='Administratieve eenheden' )           or (normalize-space(.)='Adressen' )           or (normalize-space(.)='Atmosferische omstandigheden' )           or (normalize-space(.)='Beschermde gebieden' )           or (normalize-space(.)='Biogeografische gebieden' )           or (normalize-space(.)='Bodem')            or (normalize-space(.)='Bodemgebruik')            or (normalize-space(.)='Energiebronnen')            or (normalize-space(.)='Faciliteiten voor landbouw en aquacultuur')            or (normalize-space(.)='Faciliteiten voor productie en industrie')            or (normalize-space(.)=concat('Gebieden met natuurrisico',$quote,'s'))            or (normalize-space(.)='Gebiedsbeheer, gebieden waar beperkingen gelden, gereguleerde gebieden en rapportage-eenheden')            or (normalize-space(.)='Gebouwen')            or (normalize-space(.)='Geografisch rastersysteem')            or (normalize-space(.)='Geografische namen')            or (normalize-space(.)='Geologie')            or (normalize-space(.)='Habitats en biotopen')            or (normalize-space(.)='Hoogte')            or (normalize-space(.)='Hydrografie')            or (normalize-space(.)='Kadastrale percelen')            or (normalize-space(.)='Landgebruik')            or (normalize-space(.)='Menselijke gezondheid en veiligheid')            or (normalize-space(.)='Meteorologische geografische kenmerken')            or (normalize-space(.)='Milieubewakingsvoorzieningen')            or (normalize-space(.)='Minerale bronnen')            or (normalize-space(.)='Nutsdiensten en overheidsdiensten')            or (normalize-space(.)='Oceanografische geografische kenmerken')            or (normalize-space(.)='Orthobeeldvorming')            or (normalize-space(.)='Spreiding van de bevolking  demografie')            or (normalize-space(.)='Spreiding van soorten')            or (normalize-space(.)='Statistische eenheden')            or (normalize-space(.)='Systemen voor verwijzing door middel van cordinaten')            or (normalize-space(.)='Vervoersnetwerken')            or (normalize-space(.)='Zeegebieden'))", map { '': $i, 'quote': $quote}))
return $i


return
(if ($errors) then 'FAILED' else 'PASSED',
local:error-statistics('TR.errors', count($errors)),
for $error in $errors
order by local:filename($error)
return
local:addMessage('TR.schtron.Schematron.schematron.err.1.7.1', map { 'filename': local:filename($error) , '.': . }))
                                                        </expression>
                           <testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/>
                           <etf:translationTemplates>
                              <etf:translationTemplate ref="TR.schtron.Schematron.schematron.err.1.7.1"/>
                           </etf:translationTemplates>
                        </TestAssertion>
                     </testAssertions>
                  </TestStep>
               </testSteps>
            </TestCase>
         </testCases>
      </TestModule>
   </testModules>
</etf:ExecutableTestSuite>
